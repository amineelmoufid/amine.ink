<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gemini Multilingual Transcriber</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <main class="app-container">
    <header>
      <h1>Gemini Multilingual Transcriber</h1>
      <p>Turn audio files into perfectly timed SRT captions with Gemini 2.5 Pro.</p>
    </header>

    <section class="card">
      <h2>Upload Audio</h2>
      <label class="file-input">
        <span id="file-label">Choose audio file...</span>
        <input type="file" id="audio-file" accept=".mp3,.mpeg,.wav,.m4a,.ogg,.flac,.webm,audio/*">
      </label>
      <p class="hint">Supports MP3, WAV, M4A, OGG, FLAC, and more. Audio stays in your browser.</p>
    </section>

    <section class="card">
      <h2>Caption Settings</h2>
      <div class="options-grid">
        <div>
          <h3>Words per Caption</h3>
          <label><input type="radio" name="words-per-caption" value="single"> 1 word</label>
          <label><input type="radio" name="words-per-caption" value="short" checked> 2-4 words</label>
          <label><input type="radio" name="words-per-caption" value="medium"> 4-8 words</label>
          <label><input type="radio" name="words-per-caption" value="sentence"> Sentence by sentence</label>
        </div>
        <div>
          <h3>Lines per Caption</h3>
          <label><input type="radio" name="lines-per-caption" value="1" checked> 1 line</label>
          <label><input type="radio" name="lines-per-caption" value="2"> 2 lines</label>
          <label><input type="radio" name="lines-per-caption" value="3"> 3 lines</label>
        </div>
        <div>
          <h3>Character Script</h3>
          <label><input type="radio" name="character-script" value="latin" checked> Latin only</label>
          <label><input type="radio" name="character-script" value="arabic"> Arabic only</label>
          <label><input type="radio" name="character-script" value="both"> Arabic + Latin</label>
        </div>
      </div>
    </section>

    <section class="card actions">
      <button id="transcribe-btn">Transcribe</button>
      <button id="language-fix-btn" disabled>Enhance Latin Words</button>
      <button id="download-btn" disabled>Download SRT</button>
      <p id="status"></p>
    </section>

    <section class="card">
      <h2>Preview</h2>
      <div class="preview-tabs">
        <button id="view-srt-btn" class="active" type="button">SRT View</button>
        <button id="view-highlight-btn" type="button">Highlight Mode</button>
      </div>
      <textarea id="srt-output" rows="16" placeholder="SRT output appears here..."></textarea>
      <div id="highlight-container" class="highlight-container hidden">
        <p class="hint">Highlight uncertain phrases, tweak the timing or wording, and replay just that portion of the audio.</p>
        <div class="highlight-actions">
          <button id="mark-uncertain-btn" type="button" disabled>Mark Uncertain</button>
          <button id="clear-play-btn" type="button" disabled>Clear &amp; Play</button>
        </div>
        <div id="highlight-list" class="highlight-list">
          <p class="hint">Run a transcription first, then switch to highlight mode to review plain text.</p>
        </div>
      </div>
    </section>

    <section class="card" id="visual-editor">
      <h2>Visual Editor</h2>
      <p class="hint">Play the audio, monitor captions, and nudge timing by 100ms steps.</p>
      <audio id="audio-player" controls preload="metadata"></audio>
      <div class="editor-grid">
        <div id="caption-list" class="caption-list">
          <p class="hint">Captions will appear here after transcription.</p>
        </div>
        <div class="caption-inspector" id="caption-inspector">
          <h3>Caption Inspector</h3>
          <p class="hint">Select a caption to edit timing or text, then apply changes.</p>
          <label>
            Start (HH:MM:SS,mmm)
            <input id="inspector-start" type="text" placeholder="00:00:00,000" disabled>
          </label>
          <label>
            End (HH:MM:SS,mmm)
            <input id="inspector-end" type="text" placeholder="00:00:02,500" disabled>
          </label>
          <div class="inspector-timing">
            <button id="shift-back-btn" disabled>-100ms</button>
            <button id="play-caption-btn" disabled>Play Caption</button>
            <button id="shift-forward-btn" disabled>+100ms</button>
          </div>
          <label>
            Caption Text
            <textarea id="inspector-text" rows="4" placeholder="Caption text..." disabled></textarea>
          </label>
          <div class="inspector-actions">
            <button id="apply-caption-btn" disabled>Apply Changes</button>
            <button id="reset-caption-btn" disabled>Reset</button>
          </div>
          <p id="inspector-status" class="hint"></p>
        </div>
      </div>
    </section>
  </main>

  <script src="prompts.js"></script>
  <script src="app.js"></script>
</body>
</html>



